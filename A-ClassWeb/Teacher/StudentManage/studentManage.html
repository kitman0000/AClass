<!DOCTYPE >
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>A-Class</title>
		<link rel="stylesheet" href="../../css/bootstrap.min.css">
		<link rel="stylesheet" href="../../css/common.css">
		<link rel="stylesheet" href="../../css/navBar.css">
		<link rel="stylesheet" href="../../css/table.css">
		<script src="../../js/jquery.min.js"></script>
		<script src="../../js/bootstrap.min.js"></script>
		<script src="../../js/bootbox.min.js"></script>
	</head>

	<body background="../../img/BackGround.png">
		<!-- 导航栏 -->
		<div>
			<nav class="navbar navbar-AClass" role="navigation">
				<div class="container-fluid">
					<div class="navbar-header">
						<a class="navbar-brand" href="#">A-Class</a>
					</div>
					<div>
						<ul class="nav navbar-nav">
							<li><a id="homeWorkPage"  href="../Homework/selectHomework.html">作业</a></li>
							<li><a id="rollCallPage" href="../RollCall/searchRollCall.html">点名</a></li>
							<li><a id="studentPage" class="currentPage" href="studentManage.html">学生</a></li>
							<li><a id="accountPage" href="../Account/changePwd.html">账号</a></li>
							<li><a id="exitPage" href="#">退出</a></li>
					</div>
				</div>
			</nav>
		</div>
		<!-- 导航栏结束 -->

		<div class="container">
			<button class="btn" style="background: #6cb989;color: #fff;" id="addStu">添加学生</button>

			<table class="table" style="width: 900px;margin-top: 20px;">
				<thead>
					<tr>
						<th class="col-lg-1">学号</th>
						<th class="col-lg-1">姓名</th>
						<th class="col-lg-1">操作</th>
					</tr>
				</thead>
				<tbody id="myTbody">

				</tbody>
			</table>
		</div>

	</body>


	<script>
		// 导航栏高亮
		$("#studentPage").addClass("currentPage");
		$("#addStu").click(function(){
			window.location.href="../RollCall/rollCall.html";
		})
		
		$.ajax({
							url: "/api/teacher/student/showStudent", 
							type: 'post',
							contentType: "application/x-www-form-urlencoded;charset=UTF-8",
							async: false, 
							success: function (data) {
								printStu(data);
							},
							error: function() {
								
							},
							
						});
		function printStu(data) {
			var dataObj = eval(data);
			
			var insertHtml;
			
			$.each(dataObj,function(index,item){
				item = eval("("+item+")");
				insertHtml +=  "<tr>"
							  +"<td>" + item.stuId + "</td>"
							  +"<td>" + item.stuName + "</td>"
							  +"<td  onclick='deleteStu(\""+item.stuId+"\")'>" + "删除"+ "</td>"
							  +"</tr>"
			});
			$("#myTbody").append(insertHtml);
		}
		function deleteStu(stuId){
			var msg = "确认删除？"; 
			 if (confirm(msg)==true){ 
				$.ajax({
									url: "/api/teacher/student/deleteStudent", 
									type: 'post',
									data:{
										'stuId':stuId
									},
									dataType: "text",
									contentType: "application/x-www-form-urlencoded;charset=UTF-8",
									async: false, 
									success: function (data) {
										window.location.reload();
									},
									error: function() {
										
									},
									
								});
			 }
		}
		
		$("#addStu").click(function(){
			window.location.href = "addStudent.html"
		});
		$("#exitPage").click(function() {
			sessionStorage.clear();
			window.location.href = "../../index.html";
		});
		
	</script>
</html>
